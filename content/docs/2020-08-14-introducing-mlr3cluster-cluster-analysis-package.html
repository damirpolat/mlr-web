---
title: 'Introducing mlr3cluster: Cluster Analysis Package'
author: Damir Pulatov
date: '2020-08-14'
slug: mlr3cluster,tutorial,cluster
categories: 
  - R
tags:
  - mlr3
  - mlr3cluster
  - cluster analysis
  - tutorial
output:
blogdown::html_page:
  toc: true
---



<p>Tired of learning to use multiple packages to access clustering algorithms?</p>
<p>Using different packages makes it difficult to compare the performance of
clusterers?</p>
<p>It would be great to have just one package that makes interfacing
all things clustering easy?</p>
<p>mlr3cluster to rescue!</p>
<p>mlr3cluster is a cluster analysis extention package within mlr3 library. It is
a successsor of mlr’s cluster capabilities in spirit and functionality.</p>
<p>In order to take advantage of the clustering package you need to be already
familiar with R6 and basics of mlr3. See the <a href="https://mlr3book.mlr-org.com/">mlr3book (chapters 1-2)</a>
if you need a refresher.</p>
<div id="installation" class="section level2">
<h2>Installation</h2>
<p>To install the package, run the following code chunk:</p>
<pre class="r"><code>devtools::install_github(&quot;https://github.com/mlr-org/mlr3cluster&quot;)</code></pre>
<pre><code>## Skipping install of &#39;mlr3cluster&#39; from a github remote, the SHA1 (c308848c) has not changed since last install.
##   Use `force = TRUE` to force installation</code></pre>
</div>
<div id="getting-started" class="section level2">
<h2>Getting Started</h2>
<p>Assuming you know all the basics and you’ve installed the package,
here’s an example on how to perform k-means clustering on classic <a href="https://stat.ethz.ch/R-manual/R-patched/library/datasets/html/USArrests.html">usarrests</a> data set:</p>
<pre class="r"><code>library(mlr3)
library(mlr3cluster)

task = mlr_tasks$get(&quot;usarrests&quot;)
learner = mlr_learners$get(&quot;clust.kmeans&quot;)
learner$train(task)
preds = learner$predict(task = task)

preds</code></pre>
<pre><code>## &lt;PredictionClust&gt; for 50 observations:
##     row_id partition
##          1         1
##          2         1
##          3         1
## ---                 
##         48         2
##         49         2
##         50         2</code></pre>
</div>
<div id="integrated-learners-measures-and-tasks" class="section level2">
<h2>Integrated Learners, Measures and Tasks</h2>
<p>List of integrated learners:</p>
<pre class="r"><code>mlr_measures$keys(&quot;clust&quot;)</code></pre>
<pre><code>## [1] &quot;clust.db&quot;         &quot;clust.dunn&quot;       &quot;clust.hb&quot;        
## [4] &quot;clust.silhouette&quot;</code></pre>
<p>The list contains all basic types of clustering: partitional,
hierarchial, density-based, fuzzy.</p>
<p>List of integrated cluster measures:</p>
<pre class="r"><code>mlr_learners$keys(&quot;clust&quot;)</code></pre>
<pre><code>## [1] &quot;clust.agnes&quot;       &quot;clust.cmeans&quot;      &quot;clust.dbscan&quot;     
## [4] &quot;clust.diana&quot;       &quot;clust.fanny&quot;       &quot;clust.featureless&quot;
## [7] &quot;clust.kmeans&quot;      &quot;clust.pam&quot;         &quot;clust.xmeans&quot;</code></pre>
</div>
<div id="setting-hyperparameters" class="section level2">
<h2>Setting Hyperparameters</h2>
<p>Setting hyperparameters for clusterers is as easy as setting parameters for
any other mlr3 learner:</p>
<pre class="r"><code>task = mlr_tasks$get(&quot;usarrests&quot;)
learner = mlr_learners$get(&quot;clust.kmeans&quot;)
learner$param_set</code></pre>
<pre><code>## &lt;ParamSet&gt;
##           id    class lower upper                             levels
## 1:   centers ParamUty    NA    NA                                   
## 2:  iter.max ParamInt     1   Inf                                   
## 3: algorithm ParamFct    NA    NA Hartigan-Wong,Lloyd,Forgy,MacQueen
## 4:    nstart ParamInt     1   Inf                                   
## 5:     trace ParamInt     0   Inf                                   
##          default         value
## 1:             2             2
## 2:            10            10
## 3: Hartigan-Wong Hartigan-Wong
## 4:             1              
## 5:             0             0</code></pre>
<pre class="r"><code>learner$param_set$values = list(centers = 3L, algorithm = &quot;Lloyd&quot;, iter.max = 100L)
learner$train(task)
preds = learner$predict(task = task)

preds</code></pre>
<pre><code>## &lt;PredictionClust&gt; for 50 observations:
##     row_id partition
##          1         2
##          2         2
##          3         2
## ---                 
##         48         3
##         49         3
##         50         1</code></pre>
</div>
<div id="evaluating-cluster-assignments" class="section level2">
<h2>Evaluating Cluster Assignments</h2>
<p>Talk about cluster measures, list them</p>
</div>
<div id="integration-with-mlr3pipelines" class="section level2">
<h2>Integration with mlr3pipelines</h2>
<p>example how to use mlr3pipelines with mlr3cluster</p>
</div>
<div id="visualization" class="section level2">
<h2>Visualization</h2>
<p>how to use mlr3viz with cluster</p>
</div>
<div id="acknowledgements" class="section level2">
<h2>Acknowledgements</h2>
<p>I want to thank the following people for helping me contribute to the package
and this blogpost:
Michel Lang, Lars Kotthoff, Martin Binder, Patrick Stratz, Bernd Bischl.</p>
</div>
